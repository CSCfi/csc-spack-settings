modules:
  enable::
    - lmod
  lmod:
    hash_length: 0
    core_compilers:
      - gcc@4.8.5
    hierarchy:
      - mpi
    whitelist:
      - aocc
      - gcc
      - gromacs
      - openmpi
      - openblas
      - amdblis
    blacklist:
      - 'hpcx-mpi ^cuda'
      - '%gcc@4.8.5'
      - '%gcc@7.4.0'
      - '%gcc@8.3.0'
      - '%gcc@9.1.0'
      - '%intel@19.0.4'
      - '%intel@18.0.5'
      - '%gcc@10.2.0'
      - '%aocc@2.3.0'
      - '%pgi'
    all:
      conflict:
        - '${PACKAGE}'
      environment:
        set:
          ${PACKAGE}_INSTALL_ROOT: ${PREFIX}
    gcc:
      environment:
        set:
          CC: gcc
          CXX: g++
          FC: gfortran
          F90: gfortran
          F77: gfortran
          I_MPI_CC: gcc
          I_MPI_CXX: g++
          I_MPI_FC: gfortran
          I_MPI_F90: gfortran
          I_MPI_F77: gfortran
    intel:
      environment:
        set:
          CC: icc
          CXX: icpc
          FC: ifort
          F90: ifort
          F77: ifort
          ICCCFG: /appl/opt/intel_configs/icc_gcc83_csc.cfg
          ICPCCFG : /appl/opt/intel_configs/icpc_gcc83_csc.cfg
          IFORTCFG : /appl/opt/intel_configs/ifort_gcc83_csc.cfg
          I_MPI_CC: icc
          I_MPI_CXX: icpc
          I_MPI_FC: ifort
          I_MPI_F90: ifort
          I_MPI_F77: ifort
    amdblis:
      suffixes:
        "threads=openmp": omp
    fftw:
      suffixes:
        "+mpi": mpi
        "+openmp": oml
    boost:
      suffixes:
        "+mpi": mpi
    gromacs:
      suffixes:
        "+cuda": cuda
        "+plumed": plumed
    hdf5:
      suffixes:
        "+mpi": mpi
    openblas:
      suffixes:
        "threads=openmp": omp
    petsc:
      suffixes:
        "+complex+double": cmplx
        "+int64": int64
    intel-mkl:
      suffixes:
        "intel-mkl threads=openmp": omp

packages:
  all:
    permissions:
      write: group
      group: m_installation_spack
    compiler: [gcc, intel]
    providers:
      mpi: [csc.openmpi, csc.mpich]
      blas: [csc.openblas, amdblis]
      lapack: [csc.openblas, amdlibflame]
      scalapack:: [amdscalapack, netlib-scalapack]
  amdblis:
    variants: threads=openmp cpuarch=zen2
  amdlibflame:
    variants: threads=openmp
  gcc:
    variants: +binutils
  gromacs:
    variants: +shared build_type=Release ~hwloc simd=AVX2_256
  libtool:
    version: [2.4.2, 2.4.6]
  openmpi:
    variants: fabrics=ucx,hcoll schedulers=slurm ~static +pmix +lustre +thread_multiple +mlnx_platform +sys_libevent ~gpfs
  openblas:
    variants: +consistent_fpcsr threads=openmp
  openssl:
    buildable: false
    externals:
    - spec: openssl@1.1.1k
      prefix: /appl/spack/syslibs
  slurm:
    buildable: false
    externals:
    - spec: slurm@20.02.6
      prefix: /appl/spack/syslibs
  gnutls:
    buildable: false
    externals:
    - spec: gnutls@3.3.29
      prefix: /appl/spack/syslibs
  sharp:
    buildable: false
    externals:
    - spec: sharp@2.1
      prefix: /appl/opt/sharp/2.1
    - spec: sharp@2.2
      prefix: /appl/opt/sharp/2.2
  hcoll:
    buildable: false
    externals:
    - spec: hcoll@4.5.3045
      prefix: /appl/opt/hcoll/4.5.3045
    - spec: hcoll@4.6.3125
      prefix: /appl/opt/hcoll/4.6.3125
  hwloc:
    buildable: true
    externals:
    - spec: hwloc@1.11.8
      prefix: /appl/spack/syslibs
  lustre:
    buildable: false
    externals:
    - spec: lustre@2.12.3
      prefix: /appl/spack/syslibs
  ucx:
    variants: +thread_multiple
    buildable: false
    externals:
    - spec: ucx@1.8.0~cuda+thread_multiple
      prefix: /appl/opt/ucx/1.8.0-mlnx/mt
    - spec: ucx@1.9.0~cuda+thread_multiple
      prefix: /appl/opt/ucx/1.9.0-mlnx/mt
